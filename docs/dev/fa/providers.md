# سرویس ها

<a name="install-composer"></a>
سرویس های کیولیک، چیزی شبیه همان موئلف ها (component) در سایر زبان ها هستند و با اینکه جزئی از هسته هستند، به صورت مستقل می توانند در سایر پروژه ها استفاده شوند. کیولیک بر پایه سرویس ها بناشده، هر ویژگی که درون فریمورک و یا حتی خارج از بدنه فریمورک، برای شما محیا شده، از همین سرویس ها نشات گرفته. آنها هنگام اجرای فریمورک، به هسته تزریق شده و پیوند می خورند و در سراسر برنامه، در دسترس هستند.

سرویس های پیشفرض کیولیک، در مسیر `config/providers.php` گنجانده شده اند. درون این فایل، تمام سرویس های مورد نیاز کیولیک تنظیم شده و شما  میتوانید سرویس های دلخواه خود را اضافه کنید و یا حتی سرویس های پیشفرض را نیز تغییر بدهید، البته اگر به نحوه کار آنها آگاهی کامل ندارد، پیشنهاد می کنیم ابتدا بخش های بعدی را مطالعه کنید و بعد دست به کار شودید. گمان نمی کنیم دوست داشته باشید برنامه تان دیگر کار نکند!

در ادامه، شما با نحوه نوشتن و پیوند سرویس دلخواه خود به برنامه تان، به صورت اجمالی آشنا خواهید شد.

## از کجا شروع کنم

برای پیوند دادن یک سرویس به برنامه، تنها به یک بستار (تابع بدون نام) نیاز دارید. تعجب کردید؟! منتظر چیزهای بیشتری بودید؟ بله، هیچ چیز دیگری نیاز نیست!

```php
App::bind('YourServiceName', function($app)
{
	// return an object instance
});
```

برای آشنایی با بستار ها، [اینجا](#) را ببینید.

### پیوند زدن

اجازه بدهید با این مثال شروع کنیم، پیوند زدن یک کلاس دستکاری تصاویر به عنوان سرویس به برنامه.

```php
App::bind('Image', function($app)
{
	return new ImageManager(['driver' => 'imagick']);
});
```

خوب، در کد بالا چه می گذرد!  
همانطور که می بینید، در کد بالا، متد استاتیک `bind` از کلاس `App` فراخوانی شده و دو آرگومان به این متد ارسال شده، اولی رشته `'Image'` و دومی همان بستار خودمان است. رشته `Image` همان نامیست که به سرویس جدید اختصاص می دهیم و در سراسر برنامه در دسترس قرار می گیرد. متد `bind` هم وظیفه پیوند زدن سرویس مورد نظر به برنامه را بر عهده دارد، به طوری که با هر بار فراخواندن سرویس `Image`، یک نمونه جدید از کلاس `ImageManager` ساخته شده و تحویل ما داده می شود.

و اما درون بستار، برای پیوند خوردن سرویس به برنامه، بستار باید یک نمونه از شی ساخته شده را برگرداند. کیولیک سرویس ها را به روش `lazy-loading` می سازد، بدین معنا که تا سرویسی درخواست نشود، ساخته نخواهد شد و نمونه ای از آن وجود ندارد و حتی فایل و کلاس های مربوطه اش نیز بارگذاری نخواهند شد. برای آشنایی بیشتر [اینجا](#) را ببینید.